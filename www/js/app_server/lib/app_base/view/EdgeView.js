(function(){define(["require","exports","module","backbone","app_base/controller/MediaController"],function(e,t,n){var r,i=e("backbone"),s=e("app_base/controller/MediaController"),o=Backbone.View.extend({el:"#edge",className:"edge-view",initialize:function(e){this.uid="app_edge_"+this.cid,r=window[this.uid]=this,this.manifest=e.manifest,this.media_root="",this.compId=this.options.compId,this.media=new s({app:this,preload_manifest:this.manifest,media_root:this.media_root,callback:this.onMediaReady})},onMediaReady:function(e){var t=r.options;t.type=="edge_iframe"?e.loadIframe(t.compId+".html",$(t.el),t.width,t.height,r.renderEdgeIframe):e.loadEdgeComp($(t.el),t.compId,r.renderEdgeComposition,t.width,t.height)},renderEdgeIframe:function(e,t){$("body",e).css("margin",0).css("padding",0);var n=window.document.getElementById(t).contentWindow,i=setInterval(function(){n.AdobeEdge!=undefined&&(n.AdobeEdge.bootstrapCallback(function(e){r.media.loadedEdgeComps[e]=n.AdobeEdge.getComposition(e);var t=n.AdobeEdge.getComposition(e).getStage();r.options.callback.call(null,t,e),r.onResize()}),clearInterval(i))},50)},renderEdgeComposition:function(e,t){r.options.callback.call(r,e,r.compId)},onResize:function(e){r.sw=parseInt($(window).width()),r.sh=parseInt($(window).height())},destroy:function(){}});return n.exports=o})}).call(this);