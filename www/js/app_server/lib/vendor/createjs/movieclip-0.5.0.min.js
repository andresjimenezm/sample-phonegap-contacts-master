/*
* EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/

this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype=new createjs.Container;e.INDEPENDENT="independent",e.SINGLE_FRAME="single",e.SYNCHED="synched",t.startPosition=0,t.loop=!0,t.timeline=null,t.paused=!1,t.actionsEnabled=!0,t._synchOffset=0,t._prevPos=-1,t._prevPosition=0,t.Container_initialize=t.initialize,t.initialize=function(t,n,r,i){this.mode=t||e.INDEPENDENT,this.startPosition=n||0,this.loop=r,props={paused:!0,position:n,useTicks:!0},this.Container_initialize(),this.timeline=new createjs.Timeline(null,i,props),this._managed={}},t.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0},t.Container_draw=t.draw,t.draw=function(e,t,n){if(this.DisplayObject_draw(e,t))return!0;this._updateTimeline(),this.Container_draw(e,t,n)},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.clone=function(){throw"MovieClip cannot be cloned."},t.toString=function(){return"[MovieClip (name="+this.name+")]"},t.Container__tick=t._tick,t._tick=function(t){!this.paused&&this.mode==e.INDEPENDENT&&(this._prevPosition=this._prevPos<0?0:this._prevPosition+1),this.Container__tick(t)},t._goto=function(e){e=this.timeline.resolve(e),e!=null&&(this._prevPosition=e,this._updateTimeline())},t._reset=function(){this._prevPos=-1},t._updateTimeline=function(){var t=this.timeline,n=t._tweens,r=this.children,i=this.mode!=e.INDEPENDENT;t.loop=this.loop==null?!0:this.loop,i?t.setPosition(this.startPosition+(this.mode==e.SINGLE_FRAME?0:this._synchOffset),createjs.Tween.NONE):t.setPosition(this._prevPosition,this.actionsEnabled?null:createjs.Tween.NONE),this._prevPosition=t._prevPosition;if(this._prevPos!=t._prevPos){this._prevPos=t._prevPos;for(var s in this._managed)this._managed[s]=1;for(t=n.length-1;t>=0;t--)if(s=n[t],i=s._target,i!=this)s=s._stepPosition,i instanceof createjs.DisplayObject?this._addManagedChild(i,s):this._setState(i.state,s);for(t=r.length-1;t>=0;t--)n=r[t].id,this._managed[n]==1&&(this.removeChildAt(t),delete this._managed[n])}},t._setState=function(e,t){if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n],s=i.t,i=i.p,o;for(o in i)s[o]=i[o];this._addManagedChild(s,t)}},t._addManagedChild=function(t,n){t._off||(this.addChild(t),t instanceof e&&(t._synchOffset=n,t.mode==e.INDEPENDENT&&(!this._managed[t.id]||this._prevPos==0)&&t._reset()),this._managed[t.id]=2)},createjs.MovieClip=e;var n=function(){throw"MovieClipPlugin cannot be instantiated."};n.priority=100,n.install=function(){createjs.Tween.installPlugin(n,["startPosition"])},n.init=function(e,t,n){if(t=="startPosition"||!(e._target instanceof createjs.MovieClip))return n},n.tween=function(e,t,n,r,i,s){return e._target instanceof createjs.MovieClip?s==1?i[t]:r[t]:n},n.install()}();