/*!
 * VERSION: beta 0.9.0
 * DATE: 2013-01-21
 * JavaScript (also available in AS3 and AS2)
 * UPDATES AND DOCS AT: http://www.greensock.com
 *
 * @license Copyright (c) 2008-2013, GreenSock. All rights reserved.
 * This work is subject to the terms in http://www.greensock.com/terms_of_use.html or for 
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/

(window._gsQueue||(window._gsQueue=[])).push(function(){window._gsDefine("plugins.BezierPlugin",["plugins.TweenPlugin"],function(e){var t=function(){e.call(this,"bezier",-1),this._overwriteProps.pop(),this._func={},this._round={}},n=t.prototype=new e("bezier",1),r=180/Math.PI,i=Math.PI/180,s=[],o=[],u=[],a={},f=function(t,n,r,i){this.a=t,this.b=n,this.c=r,this.d=i,this.da=i-t,this.ca=r-t,this.ba=n-t},l=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",c=t.bezierThrough=function(e,t,n,r,i,f){var c,h,v,m,g,y,b,w,E={},S=[],x=f||e[0];i="string"==typeof i?","+i+",":l,null==t&&(t=1);for(h in e[0])S.push(h);if(e.length>1){for(w=e[e.length-1],b=!0,c=S.length;--c>-1;)if(h=S[c],Math.abs(x[h]-w[h])>.05){b=!1;break}b&&(e=e.concat(),f&&e.unshift(f),e.push(e[1]),f=e[e.length-3])}for(s.length=o.length=u.length=0,c=S.length;--c>-1;)h=S[c],a[h]=-1!==i.indexOf(","+h+","),E[h]=p(e,h,a[h],f);for(c=s.length;--c>-1;)s[c]=Math.sqrt(s[c]),o[c]=Math.sqrt(o[c]);if(!r){for(c=S.length;--c>-1;)if(a[h])for(v=E[S[c]],y=v.length-1,m=0;y>m;m++)g=v[m+1].da/o[m]+v[m].da/s[m],u[m]=(u[m]||0)+g*g;for(c=u.length;--c>-1;)u[c]=Math.sqrt(u[c])}for(c=S.length,m=n?4:1;--c>-1;)h=S[c],v=E[h],d(v,t,n,r,a[h]),b&&(v.splice(0,m),v.splice(v.length-m,m));return E},h=function(e,t,n){t=t||"soft";var r,i,s,o,u,a,l,c,h,p,d,v={},m="cubic"===t?3:2,g="soft"===t,y=[];if(g&&n&&(e=[n].concat(e)),null==e||m+1>e.length)throw"invalid Bezier data";for(h in e[0])y.push(h);for(a=y.length;--a>-1;){for(h=y[a],v[h]=u=[],p=0,c=e.length,l=0;c>l;l++)r=null==n?e[l][h]:"string"==typeof (d=e[l][h])&&"="===d.charAt(1)?n[h]+Number(d.charAt(0)+d.substr(2)):Number(d),g&&l>1&&c-1>l&&(u[p++]=(r+u[p-2])/2),u[p++]=r;for(c=p-m+1,p=0,l=0;c>l;l+=m)r=u[l],i=u[l+1],s=u[l+2],o=2===m?0:u[l+3],u[p++]=d=3===m?new f(r,i,s,o):new f(r,(2*i+r)/3,(2*i+s)/3,s);u.length=p}return v},p=function(e,t,n,r){var i,u,a,l,c,h,p=[];if(r)for(e=[r].concat(e),u=e.length;--u>-1;)"string"==typeof (h=e[u][t])&&"="===h.charAt(1)&&(e[u][t]=r[t]+Number(h.charAt(0)+h.substr(2)));if(i=e.length-2,0>i)return p[0]=new f(e[0][t],0,0,e[-1>i?0:1][t]),p;for(u=0;i>u;u++)a=e[u][t],l=e[u+1][t],p[u]=new f(a,0,0,l),n&&(c=e[u+2][t],s[u]=(s[u]||0)+(l-a)*(l-a),o[u]=(o[u]||0)+(c-l)*(c-l));return p[u]=new f(e[u][t],0,0,e[u+1][t]),p},d=function(e,t,n,r,i){var a,f,l,c,h,p,d,m,g,y,b,w,E,S=e.length-1,x=0,T=e[0].a;for(a=0;S>a;a++)h=e[x],f=h.a,l=h.d,c=e[x+1].d,i?(b=s[a],w=o[a],E=.25*(w+b)*t/(r?.5:u[a]||.5),p=l-(l-f)*(r?.5*t:E/b),d=l+(c-l)*(r?.5*t:E/w),m=l-(p+(d-p)*(3*b/(b+w)+.5)/4)):(p=l-.5*(l-f)*t,d=l+.5*(c-l)*t,m=l-(p+d)/2),p+=m,d+=m,h.c=g=p,h.b=0!==a?T:T=h.a+.6*(h.c-h.a),h.da=l-f,h.ca=g-f,h.ba=T-f,n?(y=v(f,T,g,l),e.splice(x,1,y[0],y[1],y[2],y[3]),x+=4):x++,T=d;h=e[x],h.b=T,h.c=T+.4*(h.d-T),h.da=h.d-h.a,h.ca=h.c-h.a,h.ba=T-h.a,n&&(y=v(h.a,T,h.c,h.d),e.splice(x,1,y[0],y[1],y[2],y[3]))},v=t.cubicToQuadratic=function(e,t,n,r){var i={a:e},s={},o={},u={c:r},a=(e+t)/2,f=(t+n)/2,l=(n+r)/2,c=(a+f)/2,h=(f+l)/2,p=(h-c)/8;return i.b=a+(e-a)/4,s.b=c+p,i.c=s.a=(i.b+s.b)/2,s.c=o.a=(c+h)/2,o.b=h-p,u.b=l+(r-l)/4,o.c=u.a=(o.b+u.b)/2,[i,s,o,u]},m=function(e,t){t=t>>0||6;var n,r,i,s,o=[],u=[],a=0,f=0,l=t-1,c=[],h=[];for(n in e)g(e[n],o,t);for(i=o.length,r=0;i>r;r++)a+=Math.sqrt(o[r]),s=r%t,h[s]=a,s===l&&(f+=a,s=r/t>>0,c[s]=h,u[s]=f,a=0,h=[]);return{length:f,lengths:u,segments:c}},g=function(e,t,n){for(var r,i,s,o,u,a,f,l,c,h,p,d=1/n,v=e.length;--v>-1;)for(h=e[v],s=h.a,o=h.d-s,u=h.c-s,a=h.b-s,r=i=0,l=1;n>=l;l++)f=d*l,c=1-f,r=i-(i=(f*f*o+3*c*(f*u+c*a))*f),p=v*n+l-1,t[p]=(t[p]||0)+r*r};return n.constructor=t,t.API=2,t._autoCSS=!0,t.quadraticToCubic=function(e,t,n){return new f(e,(2*t+e)/3,(2*t+n)/3,n)},t._cssRegister=function(){var e=(window.GreenSockGlobals||window).com.greensock.plugins.CSSPlugin;if(e){var n=e._internals,r=n._parseToProxy,s=n._setPluginRatio,o=n.CSSPropTween;n._registerComplexSpecialProp("bezier",null,function(e,n,u,a,f,l){n instanceof Array&&(n={values:n}),l=new t;var c,h,p,d=n.values,v=d.length-1,m=[],g={};if(0>v)return f;for(c=0;v>=c;c++)p=r(e,d[c],a,f,l,v!==c),m[c]=p.end;for(h in n)g[h]=n[h];return g.values=m,f=new o(e,"bezier",0,0,p.pt,2),f.data=p,f.plugin=l,f.setRatio=s,0===g.autoRotate&&(g.autoRotate=!0),g.autoRotate&&(g.autoRotate instanceof Array||(c=g.autoRotate===!0?0:Number(g.autoRotate)*i,g.autoRotate=null!=p.end.left?[["left","top","rotation",c,!0]]:null!=p.end.x?[["x","y","rotation",c,!0]]:!1)),g.autoRotate&&(a._transform||a._enableTransforms(!1),p.autoRotate=a._target._gsTransform),l._onInitTween(p.proxy,g,a._tween),f})}},n._onInitTween=function(e,t,n){this._target=e,t instanceof Array&&(t={values:t}),this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var r,i,s,o,u,a=t.values||[],f={},l=a[0],p=t.autoRotate||n.vars.orientToBezier;this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",p===!0?0:Number(p)||0]]:null;for(r in l)this._props.push(r);for(s=this._props.length;--s>-1;)r=this._props[s],this._overwriteProps.push(r),i=this._func[r]="function"==typeof e[r],f[r]=i?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(e[r]),u||f[r]!==a[0][r]&&(u=f);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?c(a,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,u):h(a,t.type,f),this._segCount=this._beziers[r].length,this._timeRes){var d=m(this._beziers,this._timeRes);this._length=d.length,this._lengths=d.lengths,this._segments=d.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(p=this._autoRotate)for(p[0]instanceof Array||(this._autoRotate=p=[p]),s=p.length;--s>-1;)for(o=0;3>o;o++)r=p[s][o],this._func[r]="function"==typeof e[r]?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]:!1;return!0},n.setRatio=function(e){var t,n,i,s,o,u,a,f,l,c,h=this._segCount,p=this._func,d=this._target;if(this._timeRes){if(l=this._lengths,c=this._curSeg,e*=this._length,i=this._li,e>this._l2&&h-1>i){for(f=h-1;f>i&&e>=(this._l2=l[++i]););this._l1=l[i-1],this._li=i,this._curSeg=c=this._segments[i],this._s2=c[this._s1=this._si=0]}else if(this._l1>e&&i>0){for(;i>0&&(this._l1=l[--i])>=e;);0===i&&this._l1>e?this._l1=0:i++,this._l2=l[i],this._li=i,this._curSeg=c=this._segments[i],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(t=i,e-=this._l1,i=this._si,e>this._s2&&c.length-1>i){for(f=c.length-1;f>i&&e>=(this._s2=c[++i]););this._s1=c[i-1],this._si=i}else if(this._s1>e&&i>0){for(;i>0&&(this._s1=c[--i])>=e;);0===i&&this._s1>e?this._s1=0:i++,this._s2=c[i],this._si=i}u=(i+(e-this._s1)/(this._s2-this._s1))*this._prec}else t=0>e?0:e>=1?h-1:h*e>>0,u=(e-t*(1/h))*h;for(n=1-u,i=this._props.length;--i>-1;)s=this._props[i],o=this._beziers[s][t],a=(u*u*o.da+3*n*(u*o.ca+n*o.ba))*u+o.a,this._round[s]&&(a=a+(a>0?.5:-0.5)>>0),p[s]?d[s](a):d[s]=a;if(this._autoRotate){var v,m,g,y,b,w,E,S=this._autoRotate;for(i=S.length;--i>-1;)s=S[i][2],w=S[i][3]||0,E=S[i][4]===!0?1:r,o=this._beziers[S[i][0]][t],v=this._beziers[S[i][1]][t],m=o.a+(o.b-o.a)*u,y=o.b+(o.c-o.b)*u,m+=(y-m)*u,y+=(o.c+(o.d-o.c)*u-y)*u,g=v.a+(v.b-v.a)*u,b=v.b+(v.c-v.b)*u,g+=(b-g)*u,b+=(v.c+(v.d-v.c)*u-b)*u,a=Math.atan2(b-g,y-m)*E+w,p[s]?p[s].call(d,a):d[s]=a}},n._roundProps=function(e,t){for(var n=this._overwriteProps,r=n.length;--r>-1;)(e[n[r]]||e.bezier||e.bezierThrough)&&(this._round[n[r]]=t)},n._kill=function(t){var n,r,i=this._props;for(n in this._beziers)if(n in t)for(delete this._beziers[n],delete this._func[n],r=i.length;--r>-1;)i[r]===n&&i.splice(r,1);return e.prototype._kill.call(this,t)},e.activate([t]),t},!0)}),window._gsDefine&&window._gsQueue.pop()();